Changelog
=========

1.3 (unreleased)
----------------

Big refactoring around middleware configuration, API readability and
documentation.

- Bugfix #44 - Introduced ``django_downloadview.File``, which patches
  ``django.core.files.base.File.__iter__()`` implementation.
  See https://code.djangoproject.com/ticket/21321

- Bugfix #?? - Fixed ``basename`` assertion in
  :func:`~django_downloadview.test.assert_download_response`: always use
  ``Content-Disposition`` header.

- Bugfix #?? - Fixed ``content`` assertion in 
  :func:`~django_downloadview.test.assert_download_response`: use only
  ``streaming_content`` attribute, whatever the file wrapper.

- Feature #?? - Introduced
  :class:`~django_downloadview.middlewares.DownloadDispatcherMiddleware` that
  iterates over a list of configurable download middlewares. Allows to plug
  several download middlewares with different configurations. Deprecates the
  settings related to previous single-and-global middleware.

- Refactoring #?? - Dropped support of Python 2.6

- Refactoring #?? - ObjectDownloadView now inherits from SingleObjectMixin and
  BaseDownloadView (was DownloadMixin and BaseDetailView).

- Refactoring #?? - Documentation includes examples from demo project.

- Refactoring #?? - Documentation focuses on usage, rather than API.

- Refactoring #?? - Added base classes in
  :mod:`django_downloadview.middlewares`, such as
  :class:`~django_downloadview.middlewares.ProxiedDownloadMiddleware`.

- Refactoring #?? - Splitted nginx module in a package.

- Refactoring #?? - Expose most Python API directly in `django_downloadview`
  package. Simplifies ``import`` statements in client applications.

- Refactoring #?? - Simplified DownloadMixin.render_to_response() signature.

- Added unit tests, improved code coverage.


1.2 (2013-05-28)
----------------

Bugfixes and documentation improvements.

- Bugfix #26 - Prevented computation of virtual file's size, unless the file
  wrapper implements was_modified_since() method.

- Bugfix #34 - Improved support of files that do not implement modification
  time.

- Bugfix #35 - Fixed README conversion from reStructuredText to HTML (PyPI).


1.1 (2013-04-11)
----------------

Various improvements.
Contains **backward incompatible changes.**

- Added HTTPDownloadView to proxy to arbitrary URL.

- Added VirtualDownloadView to support files living in memory.

- Using StreamingHttpResponse introduced with Django 1.5. Makes Django 1.5 a
  requirement!

- Added ``django_downloadview.test.assert_download_response`` utility.

- Download views and response now use file wrappers. Most logic around file
  attributes, formerly in views, moved to wrappers.

- Replaced DownloadView by PathDownloadView and StorageDownloadView. Use the
  right one depending on the use case.


1.0 (2012-12-04)
----------------

- Introduced optimizations for Nginx X-Accel: a middleware and a decorator
- Introduced generic views: DownloadView and ObjectDownloadView
- Initialized project
